{
  "Users": {
    "username": { "type": "String", "required": true, "unique": true },
    "email": { "type": "String", "required": true, "unique": true },
    "password": { "type": "String", "required": true },
    "profile": {
      "avatarUrl": { "type": "String" },
      "bio": { "type": "String" },
      "socialLinks": [{ "type": "String" }],
      "locale": { "type": "String", "default": "en" },
      "preferences": {
        "notifications": { "type": "Boolean", "default": true },
        "theme": { "type": "String", "default": "light" }
      }
    },
    "roleId": { "type": "ObjectId", "ref": "Role", "required": false },
    "status": {
      "online": { "type": "Boolean", "default": false },
      "lastActive": { "type": "Date", "default": "Date.now" }
    },
    "joinedAt": { "type": "Date", "default": "Date.now" },
    "lastLogin": { "type": "Date", "default": "Date.now" },
    "threads": [{ "type": "ObjectId", "ref": "Thread" }],
    "posts": [{ "type": "ObjectId", "ref": "Post" }],
    "gamesShared": [{ "type": "ObjectId", "ref": "GamesShared" }],
    "aiInteractions": [{ "type": "ObjectId", "ref": "AIInteraction" }]
  },

  "Roles": {
    "_id": "ObjectId",
    "name": "String",
    "permissions": ["String"], // e.g., ["manage_users", "delete_posts"]
    "createdAt": "Date",
    "updatedAt": "Date"
  },

  "Threads": {
    "_id": "ObjectId",
    "title": "String",
    "authorId": "ObjectId", // Reference to Users collection
    "postIds": ["ObjectId"], // References to Posts collection
    "latestPosts": [
      {
        "postId": "ObjectId",
        "excerpt": "String",
        "createdAt": "Date"
      }
    ],
    "tags": ["String"],
    "createdAt": "Date",
    "updatedAt": "Date",
    "views": "Number",
    "isLocked": "Boolean",
    "isPinned": "Boolean"
  },

  "Posts": {
    "_id": "ObjectId",
    "threadId": "ObjectId",
    "authorId": "ObjectId",
    "content": "String",
    "createdAt": "Date",
    "updatedAt": "Date",
    "isEdited": "Boolean",
    "editHistory": [
      {
        "content": "String",
        "editedAt": "Date"
      }
    ]
  },

  "Comments": {
    "_id": "ObjectId",
    "targetType": "String", // "game", "thread", etc.
    "targetId": "ObjectId", // Reference to the target document
    "authorId": "ObjectId", // Reference to Users collection
    "content": "String",
    "createdAt": "Date",
    "updatedAt": "Date",
    "isEdited": "Boolean",
    "editHistory": [
      {
        "content": "String",
        "editedAt": "Date"
      }
    ]
  },

  "GamesShared": {
    "_id": "ObjectId",
    "title": "String",
    "description": "String",
    "uploadedBy": "ObjectId", // Reference to Users collection
    images: ["String"],
    "fileUrl": "String",
    "externalLinks": [
      {
        "name": "String",
        "url": "String"
      }
    ],
    "createdAt": "Date",
    "updatedAt": "Date",
    "downloadCount": "Number",
    "viewCount": "Number",
    "favorites": [{ "type": "ObjectId", "ref": "User" }]
    "tags": ["String"],
    "categories": [{ "type": "String", "ref": "Category" }], // Updated to reference Category collection
    "averageRating": "Number", // Calculated field
    "ratingCount": "Number", // Number of ratings
    "ratings": [
      {
        "userId": "ObjectId",
        "rating": "Number", // e.g., 1 to 5 stars
        "createdAt": "Date"
      }
    ],
    "commentIds": ["ObjectId"], // References to Comments collection
    "newRelease": "Boolean",
    "successVotes": {
      "likes": "Number",
      "dislikes": "Number",
      "percentage": "Number", // Calculated field
      "userVotes": [
          {
            "userId": "ObjectId", // Reference to User
            "vote": "String" // Either "like" or "dislike"
          }
      ]
    },
    "changelog": [
      {
        "date": "Date",
        "description": "String" // Description of updates or changes
      }
    ]
  },

  "Category": {
    "_id": "String", // Custom ID like "rpg" or "action"
    "name": "String", // e.g., "RPG"
    "description": "String", // Optional
    "icon": "String", // Optional icon URL for UI
    "parentCategory": { "type": "String", "ref": "Category" }, // Optional field for nested categories
    "createdAt": "Date",
    "updatedAt": "Date"
  },

  "AIInteractions": {
    "_id": "ObjectId",
    "userId": "ObjectId", // Reference to Users collection
    "interactionType": "String", // e.g., "code_suggestion", "chatbot"
    "request": "String",
    "response": "String",
    "responseTime": "Number", // In milliseconds
    "createdAt": "Date"
  },

  "Notifications": {
    "_id": "ObjectId",
    "userId": "ObjectId", // Reference to Users collection
    "type": "String", // e.g., "new_comment", "game_voted"
    "referenceId": "ObjectId", // ID of related content
    "message": "String",
    "read": "Boolean",
    "createdAt": "Date"
  },
  
  "Logs": {
    "_id": "ObjectId",
    "eventType": "String", // e.g., "user_login", "data_export"
    "userId": "ObjectId", // Optional
    "details": "String",
    "ipAddress": "String",
    "userAgent": "String",
    "createdAt": "Date"
  }

  "Courses": {
  "_id": "ObjectId",
  "title": { "type": "String", "required": true }, // Tên khóa học
  "description": "String", // Mô tả ngắn về khóa học
  "createdBy": { "type": "ObjectId", "ref": "Users", "required": true }, // Người tạo khóa học, tham chiếu đến người dùng
  "content": [ // Nội dung khóa học được chia thành nhiều phần và bài học
    {
      "sectionTitle": "String", // Tên phần (ví dụ: Giới thiệu, Kiến thức cơ bản về Engine)
      "lessons": [ // Mảng các bài học trong mỗi phần
        {
          "title": "String", // Tên bài học
          "videoUrl": "String", // URL của video hướng dẫn (nếu có)
          "textContent": "String", // Nội dung lý thuyết hoặc tài liệu
          "resources": [ // Các tài liệu bổ sung cho bài học
            {
              "name": "String", // Tên tài liệu (ví dụ: "Slides bài học 1")
              "url": "String" // URL của tài liệu
            }
          ],
          "createdAt": { "type": "Date", "default": "Date.now" },
          "updatedAt": { "type": "Date", "default": "Date.now" }
        }
      ]
    }
  ],
  "createdAt": { "type": "Date", "default": "Date.now" },
  "updatedAt": { "type": "Date", "default": "Date.now" },
  "tags": ["String"], // Các từ khóa cho khóa học để dễ tìm kiếm (ví dụ: "Unity", "3D")
  "categories": [{ "type": "String", "ref": "Category" }], // Các thể loại hoặc chủ đề của khóa học
  
  "averageRating": { "type": "Number", "default": 0 }, // Đánh giá trung bình của khóa học
  "ratingCount": { "type": "Number", "default": 0 }, // Tổng số lượng đánh giá
  "ratings": [ // Mảng chứa đánh giá từ người học
    {
      "userId": { "type": "ObjectId", "ref": "Users" }, // Người đã đánh giá
      "rating": { "type": "Number", "min": 1, "max": 5 }, // Giá trị đánh giá từ 1 đến 5 sao
      "comment": "String", // Nội dung nhận xét của người học
      "createdAt": { "type": "Date", "default": "Date.now" }
    }
  ],
  
  "favorites": [{ "type": "ObjectId", "ref": "Users" }], // Danh sách người dùng đã yêu thích khóa học
  "commentIds": [{ "type": "ObjectId", "ref": "Comments" }] // Tham chiếu đến các bình luận cho khóa học
  }

}
